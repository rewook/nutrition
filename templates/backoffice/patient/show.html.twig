{% extends 'backoffice/admin.html.twig' %}

{% block title %}liste Patients{% endblock %}

{% block body %}


    <div class="table-responsive">
        <h1 class="text-center">liste des Patients</h1>

        <table class="table table-striped table-bordered mt-5" id="datatable">
            <thead>
            <tr>
                <th class="text-center">Id</th>
                <th class="text-center">Email</th>
                <th class="text-center">Nom</th>
                <th class="text-center">Prénom</th>
                <th class="text-center">Téléphone</th>
                <th class="text-center">Allergène(s)</th>
                <th class="text-center">Régime(s)</th>
                <th class="text-center">Actions</th>
            </tr>
            </thead>
            <tbody>
            {% for patient in patients %}
                <tr class="text-center">
                    <td>{{ patient.id }}</td>
                    <td>{{ patient.email }}</td>
                    <td>{{ patient.nom }}</td>
                    <td>{{ patient.prenom }}</td>
                    <td>{{ patient.telephone }}</td>
                    <td>{% if patient.allergene is not empty %}
                            {% for aller in patient.allergene %}
                                {{ aller.nom }}<br>
                            {% endfor %}
                        {% else %}
                            Aucun
                        {% endif %}
                    </td>
                    <td> {% if patient.regime is not empty %}
                            {% for reg in patient.regime %}
                                {{ reg.nom }}<br>
                            {% endfor %}
                        {% else %}
                            Aucun
                        {% endif %}
                    <td>

                        <a href="{{ path('edit_admin_patient', {'id': patient.id}) }}"><i
                                    class="fa-solid fa-file-pen"></i></a>
                        <a href="{{ path('delete_admin_patient', {'id': patient.id}) }}"><i
                                    class="fa-solid fa-trash-can"
                                    onclick="return confirm('Etes-vous sûr de vouloir supprimer ce patient ?')"></i></a>
                    </td>
                </tr>
            {% endfor %}
            </tbody>
        </table>

        <a href="{{ path('add_admin_patient') }}"><input type="button" class="btn btn-outline-primary" value="AJOUTER"/></a>
    </div>

    <script>
        $(document).ready(function () {
            $('#datatable').DataTable();
        });
    </script>

{% endblock %}
